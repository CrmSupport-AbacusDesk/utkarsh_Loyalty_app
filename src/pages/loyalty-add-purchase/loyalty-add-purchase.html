<ion-header>
  <ion-navbar>
    <ion-title class="f14">
      Add Purchase Order
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <form  #f="ngForm" (ngSubmit)=" f.valid && submit(f)">
    <div class="form">
      <ion-list>

        <!-- <ion-item class="cs-input mt0" [ngClass]="{'error':f.submitted && against_influencer_type?.invalid}" *ngIf="type!=4 && type!=2 && type!=1 ">
          <ion-label floating>{{'Select Type'}}<span>*</span></ion-label>
          <ion-select name="against_influencer_type" [(ngModel)]="data.against_influencer_type" #against_influencer_type="ngModel"  (ngModelChange)="getnetworklist()" [disabled]="add_list.length > 0" required >
            <ion-option value="Distributor" >Distributor</ion-option>
            <ion-option value="Dealer" *ngIf="type!=4">Dealer</ion-option>
            <ion-option value="Retailer" *ngIf="type!=2 && type!=4">Retailer</ion-option>
          </ion-select>
        </ion-item> -->

        <ng-container *ngIf="data.against_influencer_type || type==4 || type==1">
          <ion-item [ngClass]="{'error':f.submitted && against_influencer_id?.invalid}">
            <ion-label floating *ngIf="data.against_influencer_type=='Distributor' || type==4">{{'Select Distributor'}}<span>*</span></ion-label>
            <ion-label floating *ngIf="data.against_influencer_type=='Dealer' || type==2">{{'Select Dealer'}}<span>*</span></ion-label>
            <!-- <ion-label floating *ngIf="data.against_influencer_type=='Retailer'">{{'Select Retailer'}}<span>*</span></ion-label> -->
            <ion-label floating *ngIf="data.against_influencer_type=='Plumber'">{{'Select Company Name'}}<span>*</span></ion-label>

  
            <ionic-selectable 
            item-content 
            [(ngModel)]="data.against_influencer_id" 
            #against_influencer_id="ngModel"
            [items]="influcencersList"
            name="against_influencer_id"
            itemValueField="id"
            itemTextField="company_name"
            [hasVirtualScroll]="true"
            [canSearch]="true" required (ngModelChange)="getnetworklist(data.against_influencer_id)">
        </ionic-selectable>
      </ion-item>


      <ion-item class="cs-input" [ngClass]="{'error':f.submitted && bill_amount?.invalid}">
        <ion-label floating>{{'Bill Amount'}}<span>*</span></ion-label>
        <ion-input type="tel"  name="bill_amount" #bill_amount="ngModel" min="0"  [(ngModel)]="data.bill_amount" required></ion-input>
      </ion-item>
          
          <ion-item [ngClass]="{'error':f.submitted && bill_date?.invalid}">
            <ion-label floating>{{'Bill Date'}} <span>*</span></ion-label>
            <ion-datetime display-format="MMM DD, YYYY"  name="bill_date" #bill_date="ngModel" max="{{today_date}}"
            [(ngModel)]="data.bill_date"
            class="calander"  required>
          </ion-datetime>
        </ion-item>
        
        <ion-item  [ngClass]="{'error':f.submitted && bill_no?.invalid}">
          <ion-label floating>{{'Bill No.'}}<span>*</span></ion-label>
          <ion-input type="text" name="bill_no" #bill_no="ngModel" [(ngModel)]="data.bill_no"  required></ion-input>
        </ion-item>
        <!-- <div class="cs-heading1 pl0" >
          <p>ITEM INFORMATION</p>
        </div>
         -->

         <!-- [disabled]="add_list.length > 0" -->
        
        <!-- <ion-item class="cs-input mt0">
          <ion-label floating>{{'Select Category'}}<span>*</span></ion-label>
          <ion-select name="cat_id" [(ngModel)]="data.cat_id" #cat_id="ngModel" (ngModelChange)="productItems(data.cat_id)" >
            <ion-option *ngFor="let row of catList" value="{{row.id}}">{{row.category}}</ion-option>
          </ion-select>
        </ion-item> -->
        
        
        <!-- <ion-item class="cs-input mt0">
          <ion-label floating>{{'Select Product'}}<span>*</span></ion-label>
          <ion-select name="item_name" [(ngModel)]="data.item_name" #item_name="ngModel" >
            <ion-option *ngFor="let row of ItemList"  [value]="row" >{{row.product_name}}-{{row.product_code}}</ion-option>
          </ion-select>
        </ion-item> -->

        <!-- <ion-item>
          <ion-label floating >{{'Select Product'}}<span>*</span></ion-label>
          <ionic-selectable
          item-content 
          [(ngModel)]="data.item_name" 
          #item_name="ngModel"
          [items]="ItemList"
          name="item_name"
          itemValueField="id"
          itemTextField="product_name"
          [hasVirtualScroll]="true"
          [canSearch]="true">
      </ionic-selectable>
    </ion-item> -->
        
        
        <!-- <ion-item class="cs-input">
          <ion-label floating>{{'QTY'}}<span>*</span></ion-label>
          <ion-input type="tel"  name="qty" #qty="ngModel" min="0"  minlength="1"  maxlength="5"  [(ngModel)]="data.qty"></ion-input>
        </ion-item> -->
        
       
        
        
        </ng-container>
      
      <!-- <div class="no-padding" *ngFor="let row of add_list; let i = index;">
        <div class="cs-list mt15">
          <div class="top-block">
            <p>{{'Bill Date' }} : <strong>{{row.bill_date |  date:'d MMMM y'}}</strong></p>
            
          </div>
          <div class="middle-block">
            <div class="three-block">
              <p>{{'Bill No.' }} : <strong>{{row.bill_no}}</strong></p>
              <p>{{'Quantity' }} : <strong>{{row.qty}}</strong></p>
              
            </div>
            <div class="three-block">
              <p>{{'Product Detail' }} : <strong >{{row.item_name.product_name | titlecase}}</strong> </p>
              <button><i class="material-icons red-clr" (click)="listdelete(i)">delete_sweep</i></button>
            </div>
            
          </div>
          
        </div>
      </div> -->
      
      
      
      <div class="upload-doc mt20">
        <p class="">Upload Image</p>
        <ul class="no-padding">
          
          <li class="image-upload" *ngFor="let pic of image_data;let i = index;">
            <img src="{{pic}}">
            <button class="del"><i class="material-icons"
              (click)="remove_image(i)">delete_sweep</i></button>
            </li>
            
            <li class="add_image" (click)="image_data.length <= 5 ?  captureMedia() : showLimit()">
              <img src="assets/imgs/upload_imae_icon.png" alt="">
              Upload  <span>Here</span>
            </li>
          </ul>
        </div>
        
        <div class="mt16">
          <button ion-button block class="capitalize" [disabled]="saveFlag" ><ion-spinner *ngIf="spinner == true"></ion-spinner>Save</button>
        </div>
        
      </ion-list>
    </div>
    
    
  </form>
  
  
  
</ion-content>